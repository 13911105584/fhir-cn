<?xml version="1.0" encoding="UTF-8"?>

<Profile xmlns="http://hl7.org/fhir">
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml">to do</div>
  </text>
  <url value="http://hl7.org/fhir/Profile/questionnaire-extensions"/>
  <name value="Core extensions for Questionnaire"/>
  <publisher value="HL7"/>
  <telecom>
    <system value="url"/>
    <value value="http://www.hl7.org"/>
  </telecom>
  <description value="Contains standard extensions for Questionnaire, amongst others for validation"/>
  <status value="draft"/>
  <date value="2013-07-04"/>
  <mapping>
    <identity value="rim"/>
    <uri value="http://hl7.org/v3"/>
    <name value="RIM"/>
  </mapping>
  <extensionDefn>
    <code value="category"/>
    <display value="What kind of questionnaire?"/>
    <contextType value="resource"/>
    <context value="Questionnaire"/>
    <element>
      <path value="category"/>
      <definition>
        <short value="What kind of questionnaire?"/>
        <formal value="A code that identifies the questionnaire as falling into a particular group of like questionnaires.  E.g. &quot;Pediatric&quot;, &quot;Admissions&quot;, &quot;Research&quot;, &quot;Demographic&quot;, &quot;Opinion Survey&quot;, etc."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="CodeableConcept"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <binding>
          <name value="QuestionnaireCategory"/>
          <isExtensible value="false"/>
          <description value="Classifications for questionnaires.  Can include such concepts as &quot;intake form&quot;, &quot;opinion survey&quot;, &quot;clinical research questionnaire&quot;, &quot;pediatric&quot;, etc."/>
        </binding>
        <mapping>
          <identity value="rim"/>
          <map value="./inboundRelationship[typeCode=SUBJ]/act[classCode=LIST, moodCode=EVN]/code"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="label"/>
    <display value="E.g. &quot;1(a)&quot;, &quot;2.5.3&quot;"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group"/>
    <context value="Questionnaire.group.group"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="label"/>
      <definition>
        <short value="E.g. &quot;1(a)&quot;, &quot;2.5.3&quot;"/>
        <formal value="A label for a particular group or question within the questionnaire."/>
        <comments value="These are generally unique within a questionnaire, though this is not guaranteed (some questionnaires may have multiple questions with the same label with logic to control which gets exposed)."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="string"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <mapping>
          <identity value="rim"/>
          <map value="Not supported"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="minOccurs"/>
    <display value="Minimum repetitions"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group"/>
    <context value="Questionnaire.group.group"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="minOccurs"/>
      <definition>
        <short value="Minimum repetitions"/>
        <formal value="The minimum number of times the group must appear or the minimum number of answers for a question - when greater than 1."/>
        <comments value="Default assumption for &quot;required&quot; elements is minOccurs=1."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="integer"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <mapping>
          <identity value="rim"/>
          <map value="N/A - MIF rather than RIM level"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="maxOccurs"/>
    <display value="Maximum repetitions"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group"/>
    <context value="Questionnaire.group.group"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="maxOccurs"/>
      <definition>
        <short value="Maximum repetitions"/>
        <formal value="The maximum number of times the group must appear or the minimum number of answers for a question - when greater than 1 and not unlimited."/>
        <comments value="Only relevant if the element has repeats=true and there&#39;s a need to constrain the number of allowed repetitions."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="integer"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <mapping>
          <identity value="rim"/>
          <map value="N/A - MIF rather than RIM level"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="hidden"/>
    <display value="Don&#39;t display to user"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group"/>
    <context value="Questionnaire.group.group"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="hidden"/>
      <definition>
        <short value="Don&#39;t display to user"/>
        <formal value="If true, indicates that the containing group or question should not be displayed to the user for data entry."/>
        <comments value="Some questionnaires may have questions that represent calculated values or internal &quot;fixed&quot; metadata.  These elements need to be included with the answers, but should not be displayed to the user."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="boolean"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="enableWhen"/>
    <display value="Only allow data when:"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group"/>
    <context value="Questionnaire.group.group"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="enableWhen"/>
      <definition>
        <short value="Only allow data when:"/>
        <formal value="If present, indicates that the group or question containing the extension should only be enabled (allow an answer to be present and, in most circumstances, even be visible to the user) when the specified condition is true."/>
        <comments value="Allows questionnaires to adapt based on answers to prior questions.  E.g. If physical gender is specified as a male, no need to capture pregnancy history."/>
        <min value="0"/>
        <max value="*"/>
        <mustSupport value="false"/>
        <isModifier value="false"/>
      </definition>
    </element>
    <element>
      <path value="enableWhen.question"/>
      <definition>
        <short value="Question that must be answered"/>
        <formal value="The linkId for the question whose answer must be present in order for the &quot;enable&quot; to be triggered."/>
        <min value="1"/>
        <max value="1"/>
        <type>
          <code value="string"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
      </definition>
    </element>
    <element>
      <path value="enableWhen.answer"/>
      <definition>
        <short value="Value question must have"/>
        <formal value="If present, then the specified question must match the specified answer for all components present in the enableWhen.answer."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="*"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="defaultValue"/>
    <display value="Initial presumed answer for question"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="defaultValue"/>
      <definition>
        <short value="Initial presumed answer for question"/>
        <formal value="This is the value that should be pre-populated when rendering the questionnaire for user input."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="*"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <mapping>
          <identity value="rim"/>
          <map value="N/A - MIF rather than RIM level"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="defaultAsFixed"/>
    <display value="Y"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="defaultAsFixed"/>
      <definition>
        <short value="Y"/>
        <formal value="Treat default as fixed value?."/>
        <comments value="If true, the default value is set as a fixed &quot;answer&quot; for the question."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="boolean"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <mapping>
          <identity value="rim"/>
          <map value="N/A - MIF rather than RIM level"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
  <extensionDefn>
    <code value="deReference"/>
    <display value="Implemented CDE"/>
    <contextType value="resource"/>
    <context value="Questionnaire.group.question"/>
    <element>
      <path value="deReference"/>
      <definition>
        <short value="Implemented CDE"/>
        <formal value="A reference to the Data Element that corresponds to the question text and answer constraints for this question."/>
        <comments value="If a code applies to a question, that code should still be conveyed on the question, even if the same code is also referenced as a DataElement.code in the referenced data element.  This extension must not be used in place of specifying the Questionnaire.group.question.concept element."/>
        <min value="0"/>
        <max value="1"/>
        <type>
          <code value="Resource(DataElement)"/>
        </type>
        <mustSupport value="false"/>
        <isModifier value="false"/>
        <mapping>
          <identity value="rim"/>
          <map value="./outboundRelationship[typeCode=INST]/target[classCode=OBS, moodCode=DEFN]"/>
        </mapping>
      </definition>
    </element>
  </extensionDefn>
</Profile>